
## Git Guide
<details>
<summary>접기/펼치기</summary>
<div markdown="1">

<br />

1. 깃 클론
```bash
git clone <프로젝트-url>
```
```bash
git clone https://lab.ssafy.com/s12-webmobile1-sub1/S12P11B101.git
```

<br />

2. 본인 로컬 브랜치 생성 후 이동
```bash
git switch -c <브랜치명>
```
```bash
git switch -c taeyeong
```

<br />

3. 작업 후 변경 사항 확인
```bash
git status
```

<br />

4. 변경 사항 추가
```bash
git add <추가할 파일>
```

<br />

5. 변경 사항 커밋
```bash
git commit -m "<태그: 내용 (#Jira Issue number)>"
```
```bash
git commit -m "feat: 사용자 로그인 기능 추가 (#123)"
```
- `feat:` 새로운 기능 추가
- `fix:` 버그 수정
- `docs:` 문서 수정
- `style:` 코드 포맷팅, 세미콜론 누락, 코드 변경이 없는 경우
- `refactor:` 코드 리펙토링
- `test:` 테스트 코드, 리펙토링 테스트 코드 추가
- `chore:` 빌드 업무 수정, 패키지 매니저 수정
- `delete:` 파일 삭제

<br />

6. 로컬 브랜치를 원격 origin에 푸시
```bash
git push -u origin <브랜치명>
```
```bash
git push -u origin taeyeong
```

<br />

7. Merge Request 생성
- [**Merge Request**](https://lab.ssafy.com/s12-webmobile1-sub1/S12P11B101/-/merge_requests) 메뉴에서 `New Merge Request`를 클릭
- `Source Branch`(본인 작업 브랜치)와 `Target Branch`를 선택
- MR 작성 후 리뷰어를 지정하여 Merge Request를 요청

<br />


</div>
</details>

<br />
<br />


## **1.** 주제

<aside>

- 스토리텔링 멀티플레이 웹게임

***→ LLM, 이미지 생성 모델을 이용한 실시간 동화 생성 게임 플랫폼***

### 🌐 [배포 사이트](http://34.64.83.164/auth)

</aside>

## 2. 목표

<aside>

- 유저들이 WebRTC를 통해 실시간으로 상호작용하며 창의적인 이야기를 만들어가는 플랫폼 제공.
- 간단한 룰로 남녀노소 플레이 가능.
- 유저들이 직접 만든 이야기를 AI 이미지 생성 모델을 통해 시각적으로 구현하여 새로운 게임 경험 제공.
- 완성된 이야기를 책 형태로 보관 및 공유하여 소유욕 충족 및 홍보 효과 증진.
- LLM을 통해 이미지 생성 프롬프트 고도화 및 데이터 분석.
- STT(Speech-to-Text)를 통하여 타자가 어려운 유저도 손쉽게 플레이 가능.
</aside>

## 3. 배경

<aside>

- 문해력 저하 및 창의력 향상의 중요성이 강조되는 현대에서, 이를 게임으로 결합한 새로운 형태의 즐길 거리 필요.
- 기존 보드게임이 가진 제약(오프라인, 시간소요)을 해결하고 남녀노소 누구나 쉽게 접근할 수 있는 온라인 기반 스토리텔링 게임 필요
→ 이러한 니즈를 충족시키기 위해 본 프로젝트를 기획함.
</aside>

## 4. 프로젝트 주요 기능

<aside>

### 비로그인/로그인 지원

- **비로그인**
    - 비로그인으로 간단히 플레이 가능.
- **일반 로그인**
    - 닉네임 비밀번호 기반 회원가입 및 로그인. 로그인 시 이야기 저장 및 공유 가능.
- **소셜 로그인**
    - 구글, 카카오톡 등 OAuth를 활용한 소셜 로그인.

### WebRTC 기반 실시간 스토리 텔링

- **실시간 채팅**
    - 채팅 시스템을 구축해 사용자들이 동시에 이야기를 나눌 수 있음.
- **룰**
    1. 모든 유저는 10점의 포인트와 4장의 이야기 카드, 1장의 결말 카드를 가진다.
    
    이야기 카드는 '호랑이', '핸드폰', '미침' 과 같은 단어 카드들이다.
    
    결말 카드는 ‘그들은 그것을 맛있게 먹었습니다’와 같은 문장 카드들이다. 
    
    2. 선 순서부터 시계방향으로 돌아가며 자신의 이야기 카드 한 장을 골라 해당 카드에 적힌 단어와 연관된 이야기를 작성한다.
    
    예) '호랑이' 카드가 패에 있다면 "옛날 옛적에 호랑이가 살았어요" 와 같이 이야기를 시작한다.
    
    3. 다음 사람도 마찬가지로 본인 이야기 카드를 활용해 이야기를 이어간다.
    
    예) '핸드폰' 카드를 골랐다면 "그 호랑이는 핸드폰을 사용했었어요" 와 같이 이야기를 이어간다.
    
    4. 한 명의 이야기를 듣고, 해당 유저의 이야기에 대해 투표를 진행한다.
    
    과반수가 이야기 전개에 대해 반대 버튼을 눌렀다면 1점의 포인트가 깎인다.
    
    예) “호랑이가 핸드폰을 쓰는게 말이 안 돼!” 하며 반대 버튼을 누름.
    
    5. 모든 인원이 이야기 카드를 다 소모하였다면, 돌아가며 결말 카드를 활용해 이야기의 결말을 낸다. 
    결말을 낼 수 있는 유저가 2점의 포인트를 얻는다. 
    결말 카드는 게임 도중 5번 까지 바꿀 수 있다. 
    
    포인트가 가장 많은 사람이 우승하게 된다.
    

### **AI 이미지 생성 프로세스**

1. **LLM을 통한 이미지 프롬프트 생성**
    - 이용자가 작성한 이야기 문장을 LLM에 입력, 이미지 생성에 최적화 된 프롬프트로 변환.
2. **이미지 생성 모델**
    - 변환된 프롬프트를 이미지 생성 모델에 입력하여 이미지 생성.
    - 생성된 이미지는 책의 삽화로 들어가게 된다.
    

### 이야기 최종 결과(동화책) 생성

1. **스토리 요약 및 제목 생성**
    - LLM이 전체 채팅 로그를 요약하고, 이야기의 주제에 맞는 제목을 생성.
2. **표지 이미지 생성**
    - 최종적으로 생성된 제목을 이미지 생성 모델에 넣어, 이야기 표지 이미지를 생성.
    - 표지 이미지 생성 프롬프트는 LLM이 아닌 시스템 프롬프트를 사용.
3. **전자책 형태로 저장**
    - 지금까지 작성된 모든 스토리와 함께 생성된 이미지들을 순서대로 배치하여 전자책 형태로 저장.
    - 데이터베이스(PostgreSQL)에 저장한 뒤, 사용자가 재접속 시 언제든 열람 가능.
    

### SNS 공유 기능

- **이야기 요약본 + 표지 이미지 공유**
    - 이용자가 원하는 SNS(예: 카카오톡, 페이스북, 트위터, 인스타그램 등)에 자동 연동할 수 있도록 소셜 공유 기능 구현.
    - 공유 시 제목과 표지 이미지를 함께 보여줄 수 있도록 메타 태그 및 이미지 경로 세팅.

### STT 기능

- 타자가 어려운 유저도 STT 기능을 활용하여 마이크를 통해 이야기를 작성할 수 있다.
</aside>

## 5. 기대효과

<aside>

**게임 플레이어 효과**

1. **창의력 향상**: 단어 카드를 활용한 스토리 작성으로 창의력 증진
2. **문해력 증대**: 자연스럽게 문해력을 향상시키는 교육적 효과
3. **시각적 재미**: AI 이미지 생성으로 게임의 몰입도와 즐거움 극대화
4. **쉬운 접근성**: 간단한 규칙과 비로그인 플레이 지원으로 누구나 쉽게 참여
5. **사회적 유대감 강화**: 친구, 가족 등과 함께 즐기며 현대 사회에서 보기 힘든 소통과 친목 도모 가능
6. **포용성 강화**: STT(Speech-to-Text) 기능을 통해 타자가 어려운 사람도 쉽게 참여 가능

**서비스 효과**

1. **유저 확장성 강화**: 스토리 공유 및 소셜 미디어 연동으로 플랫폼 사용자 증가
2. **교육적 활용 가능성**: 유아부터 성인까지 다양한 연령층에서 교육 도구로 활용 가능
3. **보육 및 교육 시설 도입 가능**: 보육시설, 학교, 문화센터 등 아이들이 있는 곳에서 활용 가능하며 창의력과 협력 능력 향상에 기여
4. **지속적 성장 가능성**: 데이터 분석 기반으로 게임 밸런스를 최적화하며 새로운 카드 및 기능 추가 가능
</aside>



## 6. 주요 기술 스택


<aside>

### **1. 주요 기술 스택**

### FE
| 기술/도구 | 설명 |
| --- | --- |
| **node.js** | JavaScript 기반의 백엔드 애플리케이션 런타임 환경. |
| **nginx** | 고성능 웹 서버 및 리버스 프록시 서버. |


### BE
| 기술/도구 | 설명 |
| --- | --- |
| **Spring Boot** | 백엔드 애플리케이션 프레임워크. |
| **Spring Data JPA** | 데이터베이스와의 ORM 매핑. |
| **Spring Security** | 인증 및 권한 관리. |
| **Mustache**(테스트 단계) | 서버 템플릿 엔진 (필요 시 사용). |
| **Swagger/OpenAPI** | API 문서화 및 테스트. |
| **Lombok** | 반복 코드를 줄이는 개발 도구. |
| **MySQL** (테스트 단계) | 테스트 데이터베이스. |
| **PostgreSQL** (배포 단계) | 배포 시 주 데이터베이스. |
| **Redis** | 캐싱 및 세션 관리를 위한 데이터베이스. |
| **Spring Boot DevTools** | 코드 변경 사항 실시간 반영. |
| **Spring Boot Test** | 테스트 코드 작성을 위한 의존성. |


### AI
| 기술/도구 | 설명 |
| --- | --- |
| **PyTorch** | 딥러닝 모델 학습 및 연구를 위한 오픈소스 머신러닝 프레임워크. |
| **Hugging Face Transformers** | 사전 학습된 LLM 모델을 쉽게 활용할 수 있는 라이브러리. |
| **LangChain** | LLM을 활용한 애플리케이션 개발을 위한 프레임워크. |
| **Sentence Transformers** | 문장 임베딩을 생성하는 모델을 지원하는 라이브러리. |
| **PGVector** | PostgreSQL에서 벡터 검색을 지원하는 확장 기능. |
| **Stable Diffusion** | 텍스트에서 고품질 이미지를 생성하는 오픈소스 모델. |
| **LoRA (Low-Rank Adaptation)** | 대형 언어 모델을 빠르고 효율적으로 미세 조정하는 기법. |


### **2. 계층 구조**

프로젝트는 **계층형 아키텍처(Layered Architecture)** 를 기반으로 설계되었습니다.

| 계층 | 역할 및 설명 |
| --- | --- |
| **Controller Layer** | 클라이언트의 HTTP 요청을 처리하고 응답을 반환. 서비스 계층과 통신. |
| **Service Layer** | 비즈니스 로직 처리. 도메인 계층 및 레포지토리 계층과 상호작용. |
| **Repository Layer** | 데이터베이스와의 CRUD 작업 처리. |
| **Domain Layer** | 데이터베이스 테이블과 매핑되는 엔티티 클래스들로 구성. |
| **DTO Layer** | 클라이언트와의 데이터 교환을 위한 데이터 전송 객체. |
| **Response Layer** | API 응답 통일성을 제공하기 위한 표준화된 구조를 정의. |
| **Config Layer** | Spring Security, Swagger 등 환경 설정 관련 클래스들이 포함됨. |

```scss
[Client]
   ↓ HTTP Request
[Controller Layer]
   ↓
[Service Layer]
   ↓
[Repository Layer] -----> [MySQL/PostgreSQL] (데이터 저장소)
   ↕
[Domain Layer]
   ↕
[DTO Layer]
   ↕
[Response Layer] -----> JSON 응답

```
</aside>